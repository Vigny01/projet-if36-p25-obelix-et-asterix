---
title: 'Analyse crois√©e : Superstore & Walmart'
subtitle: "Obelix et Asterix"
author: "Membre: TAKAM TALLA Vigny Brayan, Arthur KAMGA, Chengxian ZHAO, Jianghao LIU"
date: "2025-04-27"
output:
  prettydoc::html_pretty:
    theme: HPSTR
    highlight: github
---

<style>
summary {
  cursor: pointer;
  font-size: 18px;
  font-weight: bold;
  padding: 12px 16px;
  background: linear-gradient(to right, #0072B5, #009E73); /* m√™me style que la banni√®re */
  color: white;
  border: none;
  border-radius: 8px;
  margin: 20px 0 10px 0;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: background 0.3s ease;
}

details[open] summary {
  background: linear-gradient(to right, #009E73, #0072B5);
}

details {
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 10px 15px;
  background-color: #ffffff;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
  margin-bottom: 20px;
}

details strong {
  font-size: 17px;
  color: #007250; /* vert fonc√© harmonieux */
  display: block;
  margin-top: 10px;
  margin-bottom: 5px;
}
</style>




## Introduction

### Contexte et objectif

Dans le cadre de ce projet, nous avons travaill√© avec **deux jeux de donn√©es diff√©rents mais compl√©mentaires**. Ces donn√©es permettent d‚Äôexplorer plusieurs aspects du commerce de d√©tail : les ventes, les produits, les clients, la rentabilit√©, etc.

- Le premier fichier, appel√© *Superstore*, regroupe presque 10 000 lignes de commandes pass√©es dans une entreprise fictive de e-commerce.
- Le second fichier, bas√© sur des ventes dans des magasins Walmart, contient des donn√©es orient√©es ‚Äúpoint de vente‚Äù : horaires, satisfaction client, modes de paiement...

L‚Äôobjectif est de **mener une exploration** sur les donn√©es. Nous avons voulu comprendre comment ces syst√®mes fonctionnent, ce qui g√©n√®re du profit ou non, et peut-√™tre d√©couvrir des profils de clients, des tendances d‚Äôachat ou des produits phares.  

## Structure et nature des donn√©es

####  [Donn√©es Superstore](https://www.kaggle.com/datasets/aksha17/superstore-sales)

Ce fichier CSV contient **9994 lignes** et **21 variables**. Il s‚Äôagit d‚Äôun historique de ventes avec des informations sur les commandes, les clients, les produits et la logistique.

**Variables num√©riques :**

- `Sales` : montant de la vente.
- `Quantity` : nombre d‚Äôunit√©s vendues.
- `Discount` : remise appliqu√©e.
- `Profit` : profit net.
- `Postal Code`, `Row ID` : identifiants.

**Variables temporelles :**

- `Order Date` : date de commande.
- `Ship Date` : date d‚Äôexp√©dition.

**Variables nominales :**

- `Order ID`, `Customer ID`, `Product ID` : identifiants.
- `Customer Name` : nom du client.
- `Segment` : type de client.
- `Region`, `State`, `City` : localisation.
- `Ship Mode` : mode d‚Äôexp√©dition.
- `Category`, `Sub-Category`, `Product Name` : classification des produits.


#### [Donn√©es Walmart](https://www.kaggle.com/datasets/antaesterlin/walmart-commerce-data)

Ce fichier CSV contient **1000 transactions** et **20 variables**. Il fournit des donn√©es d√©taill√©es sur chaque vente : prix, quantit√©, mode de paiement, heure, etc.

**Variables num√©riques :**

- `unit_price` : prix unitaire.
- `quantity` : quantit√© achet√©e.
- `vat` : taxe.
- `total` : montant total pay√©.
- `cogs` : co√ªt du produit.
- `gross_margin_pct` : pourcentage de marge brute.
- `gross_income` : b√©n√©fice.
- `rating` : note du client (sur 10).

**Variables temporelles :**

- `dtme` : date de la vente.
- `tme` : heure.
- `time_of_day` : moment (matin, apr√®s-midi...).
- `day_name`, `month_name` : jour et mois de l‚Äôachat.

**Variables nominales :**

- `invoice_id` : identifiant de facture.
- `branch`, `city` : lieu.
- `customer_type` : type de client.
- `gender` : genre.
- `product_line` : type de produit.
- `payment_method` : moyen de paiement.

## Chargement des packages et des donn√©es
```{r message=FALSE}
library(ggplot2)
library(dplyr)
library(readr)
library(lubridate)
library(ggcorrplot)
library(patchwork) # important pour combiner les plots
Sys.setlocale("LC_TIME", "fr_FR.UTF-8")

# Importer les donn√©es
superstore <- read_csv("data/superstore.csv")
walmart <- read_delim("data/Walmart.csv", delim = ";")


walmart_time <-walmart
walmart_total<-walmart
superstore_raw<- superstore
```


# Vue d‚Äôensemble et corr√©lations entre variables

## Objectif

Avant de r√©pondre aux diff√©rentes questions d‚Äôanalyse, il est utile de commencer par une **vue d‚Äôensemble** des jeux de donn√©es, afin de :

- Comprendre la structure globale (types de donn√©es, valeurs manquantes, distributions).
- Identifier des **relations entre variables num√©riques** √† l‚Äôaide d‚Äôun graphique de corr√©lation.

Nous utilisons ici deux jeux de donn√©es :

- `Superstore` (ventes inter-entreprises B2B)
- `Walmart` (ventes aux particuliers B2C)

# Vue d'ensemble des deux jeu de donn√©es
```{r echo=FALSE, warning=FALSE}

# Corr√©lation Walmart
num_walmart <- walmart_total %>%
  select(where(is.numeric)) %>%
  na.omit()

cor_walmart <- cor(num_walmart)

ggcorrplot(cor_walmart, lab = TRUE, title = "Corr√©lation entre variables num√©riques (Walmart)")

```

```{r echo=FALSE}
# Corr√©lation Superstore
num_superstore <- superstore %>%
  select(where(is.numeric)) %>%
  na.omit()

cor_superstore <- cor(num_superstore)

ggcorrplot(cor_superstore, lab = TRUE, title = "Corr√©lation entre variables num√©riques (Superstore)")
```

- Une corr√©lation proche de 1 ou -1 indique un lien lin√©aire fort (positif ou n√©gatif).

- Une valeur proche de 0 montre peu ou pas de relation.


<details> 
<summary><strong> Question 1
</strong></summary>

1. Probl√©matique

**Questions pos√©es :**

- Quel est le genre des clients qui achetent le plus ?
- Comment les ventes varient-elles selon le segment de client√®le (Consumer, Corporate, Home Office) ?

**R√©ponse imagin√©e :**

On pourrait s‚Äôattendre √† ce qu‚Äôun genre d√©pense l√©g√®rement plus que l‚Äôautre.

Concernant les segments, il est possible que les consommateurs g√©n√®rent plus de ventes que les autres cat√©gories de clients.

- **Titre** : D√©penses par Genre (Walmart)
  
- **Axes** :
  - **X** : Genre (Female, Male)
  - **Y** : Montant total des d√©penses

- **L√©gende** : Genre (rose pour Female, bleu pour Male)

- Outliers (points rouges)
- M√©diane (trait central du boxplot)

**Graphique 2 (√† droite) :**

- **Titre** : Montant des ventes par Segment (Superstore)
  
- **Axes** :
  - **X** : Segment (Consumer, Corporate, Home Office)
  - **Y** : Montant des ventes

- **L√©gende** : Segment (couleurs diff√©rentes pour chaque segment)
  - Outliers(points rouges)
  - M√©diane repr√©sent√©e (trait central du boxplot)




```{r, echo = FALSE}

# Cr√©er les deux graphiques
plot1 <- ggplot(walmart, aes(x = gender, y = total, fill = gender)) +
  geom_boxplot(outlier.color = "red", outlier.size = 1.5) +
  stat_summary(fun = mean, geom = "point", shape = 23, size = 4, fill = "yellow") +
  coord_cartesian(ylim = c(0, 1500)) +
  labs(title = "Ventes par genre de client") +
  theme_minimal()

plot2 <- ggplot(superstore, aes(x = Segment, y = Sales, fill = Segment)) +
  geom_boxplot(outlier.color = "red", outlier.size = 1.5) +
  stat_summary(fun = mean, geom = "point", shape = 23, size = 4, fill = "yellow") +
  coord_cartesian(ylim = c(0, 1500)) +
  labs(title = "Ventes par Segment de clients") +
  theme_minimal()

# Les afficher c√¥te √† c√¥te
(plot1 + plot2) + 
  plot_layout(widths = c(1, 2))
```

**Analyse du premier graphique :**

En observant les d√©penses par genre, on remarque que les femmes ont tendance √† d√©penser l√©g√®rement plus que les hommes, bien que la dispersion des d√©penses soit assez similaire entre les deux groupes. Il y a √©galement plusieurs points aberrants, ce qui sugg√®re qu'il existe des clients ayant des d√©penses particuli√®rement √©lev√©es dans les deux cat√©gories. Cette diff√©rence de d√©penses entre les genres semble donc pr√©sente, bien que limit√©e. Cependant, cela soul√®ve une question int√©ressante : Quel r√¥le pourrait jouer le type de produit achet√© dans ces √©carts de d√©penses ?

**Analyse du deuxi√®me graphique :**

Pour le graphique des ventes par segment, on remarque que les m√©dianes sont assez proches entre les segments "Consumer", "Corporate" et "Home Office". Cependant, la distribution des ventes est assez similaire pour tous les segments, avec une forte pr√©sence de points aberrants vers le haut. Le segment "Consumer" semble l√©g√®rement en t√™te, g√©n√©rant davantage de ventes √©lev√©es que les autres. Cela dit, les diff√©rences entre les segments ne sont pas √©normes.
</details>


<details> 
<summary><strong> Question : Quels produits sont beaucoup achet√©s ?
</strong></summary>

**Donn√©es utilis√©es** : `product_line` et `quantity` (jeu de donn√©es Walmart)

---

**M√©thode**

Pour r√©pondre on a:

- Utiliser **product_line** pour identifier les produits.
- Utiliser **quantity** pour mesurer combien de fois chaque produit a √©t√© achet√©.
- Additionner les quantit√©s par type de produit.
- Classer les produits du plus achet√© au moins achet√©

---

**Visualisation : Produits les plus achet√©s**

```{r, echo = FALSE}
library(dplyr)
# Calculer la quantit√© totale par type de produit
produits_walmart <- walmart %>%
  group_by(product_line) %>%
  summarise(Total_Quantity = sum(quantity, na.rm = TRUE)) %>%
  arrange(desc(Total_Quantity))

# Cr√©er le graphique
ggplot(produits_walmart, aes(x = reorder(product_line, Total_Quantity), y = Total_Quantity)) +
  geom_col(fill = "skyblue") +
  coord_flip() +
  labs(title = "Produits les plus achet√©s chez Walmart",
       x = "Produit",
       y = "Quantit√© totale achet√©e") +
  theme_minimal()
```
</details>


<details> 
<summary><strong>Question 2: Est-ce que certains jours g√©n√®rent plus de ventes que d'autres ?
</strong></summary>

Nous souhaitons comprendre si certains jours de la semaine influencent le volume de ventes. Pour cela, nous analysons deux jeux de donn√©es : Superstore, qui concerne les ventes entre entreprises (B2B), et Walmart, qui concerne les ventes aux particuliers (B2C). L‚Äôobjectif est d‚Äôidentifier des tendances journali√®res dans le comportement d‚Äôachat.

Nous faisons l‚Äôhypoth√®se suivante :

- Pour Superstore, les ventes seront majoritairement concentr√©es en semaine, car les commandes inter-entreprises se font g√©n√©ralement pendant les jours ouvr√©s.

- Pour Walmart, les ventes seront plus √©lev√©es le week-end, car les particuliers ont davantage de temps libre pour faire leurs achats.

**Superstore - Ventes par jour de la semaine**
```{r, echo = FALSE}
superstore <- superstore %>%
  mutate(Order_Date = as.Date(`Order Date`, format="%d-%m-%y"),
         DayOfWeek = weekdays(Order_Date)) %>%
  group_by(DayOfWeek) %>%
  summarise(Total_Sales = sum(Sales, na.rm = TRUE))

superstore$DayOfWeek <- factor(superstore$DayOfWeek,
                               levels = c("lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi", "dimanche"))

ggplot(superstore, aes(x = DayOfWeek, y = Total_Sales, group = 1)) +
  geom_line(color = "steelblue", linewidth = 1.2) +  # üîÅ ici, on remplace size par linewidth
  geom_point(color = "darkblue", size = 3) +
  geom_text(aes(label = round(Total_Sales, 0)), vjust = -1) +
  labs(title = "Superstore : √âvolution des ventes par jour",
       x = "Jour", y = "Ventes ($)") +
  theme_minimal()
```

**Walmart - Ventes par jour de la semaine**

```{r, echo = FALSE}

walmart <- walmart %>%
  mutate(
    dtme = as.Date(dtme),
    DayOfWeek = weekdays(dtme)
  ) %>%
  group_by(DayOfWeek) %>%
  summarise(Total_Sales = sum(total, na.rm = TRUE))

walmart$DayOfWeek <- factor(walmart$DayOfWeek,
                            levels = c("lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi", "dimanche"))

ggplot(walmart, aes(x = DayOfWeek, y = Total_Sales, group = 1)) +
  geom_line(color = "darkgreen", linewidth = 1.2) +  # Remplace `size` par `linewidth`
  geom_point(color = "forestgreen", size = 3) +
  geom_text(aes(label = round(Total_Sales, 0)), vjust = -1) +
  labs(title = "Walmart : √âvolution des ventes par jour de la semaine",
       x = "Jour", y = "Ventes ($)") +
  theme_minimal()
```
**Analyse**

En observant les graphiques des ventes par jour de la semaine, plusieurs constats se d√©gagent pour les deux jeux de donn√©es :

**Superstore**

- Lundi et vendredi affichent les plus hauts niveaux de ventes, d√©passant les 420 000 $.

- Mercredi est le jour le plus faible, avec un volume de ventes nettement en dessous des autres jours.

- Samedi et dimanche pr√©sentent aussi des montants √©lev√©s, mais l√©g√®rement inf√©rieurs √† ceux du lundi et du vendredi.

Interpr√©tation :

- Superstore vend principalement √† des entreprises (B2B).

- Les commandes sont fortes en d√©but de semaine (lundi) pour anticiper l‚Äôactivit√©, et en fin de semaine (vendredi) pour se pr√©parer √† la suivante.

- Mercredi marque un creux logique : la majorit√© des besoins ont d√©j√† √©t√© couverts.

**Walmart**

- Samedi est le jour o√π les ventes sont les plus √©lev√©es, suivi par mardi.

- Dimanche reste aussi assez √©lev√©, bien que l√©g√®rement en dessous du samedi.

- Lundi √† vendredi, les ventes sont relativement stables mais plus basses que le week-end.

Interpr√©tation :

- Walmart vend aux particuliers (B2C).

- Les gens ach√®tent plus le week-end : ils ont plus de temps libre pour faire leurs courses.

- En semaine, les ventes sont plus faibles, car les clients sont occup√©s par le travail ou l‚Äô√©cole.
</details>


<details> 
<summary><strong>Question 3 : Est-ce qu‚Äôune r√©duction fait toujours gagner de l‚Äôargent ?
</strong></summary>

**R√©flexion initiale**

Nous nous sommes pos√© la question suivante : **Accorder une remise sur une vente assure-t-il toujours un b√©n√©fice ?**  
Intuitivement, nous avons suppos√© que si la remise est mod√©r√©e, elle pourrait stimuler les ventes sans trop impacter le profit ; mais qu'une remise trop importante risquerait au contraire de g√©n√©rer des pertes.

Pour valider ou invalider cette intuition, nous avons d√©cid√© de suivre une d√©marche en deux temps :  
- Visualiser la relation globale entre le taux de remise et le profit.  
- Approfondir l'analyse en √©tudiant la distribution du profit pour diff√©rents niveaux de remise.


**M√©thode**

Pour r√©pondre √† cette question, nous exploitons le jeu de donn√©es **Superstore**, qui contient deux variables cl√©s :  
- `Discount` : le taux de remise appliqu√© sur chaque vente (entre 0% et 80%).  
- `Profit` : le b√©n√©fice r√©alis√© sur chaque vente.  

Notre approche comporte plusieurs √©tapes :

1. **Analyse exploratoire initiale** :  
   Nous utilisons d'abord un scatter plot combin√© √† une courbe de r√©gression lin√©aire pour observer la tendance globale entre le taux de remise et le profit.

2. **Approfondissement avec une analyse cat√©gorielle** :  
   Afin d'aller plus loin et mieux comprendre l'impact des diff√©rents niveaux de remise, nous introduisons un boxplot par groupe de taux de remise.

**Pourquoi utiliser √©galement un boxplot ?**  
- Le boxplot nous permet d'analyser plus pr√©cis√©ment la distribution du profit dans chaque cat√©gorie de remise, en visualisant la m√©diane, les quartiles et les valeurs atypiques.  
- Cela apporte une vision plus claire et comparative entre les diff√©rents niveaux de remise.


**Visualisation**

**Partie 1 - Scatter plot : Discount vs Profit**

```{r message=FALSE, echo = FALSE}
library(ggplot2)
library(dplyr)
library(readr)

# Lire les donn√©es Superstore
superstore <- read_csv("data/superstore.csv", show_col_types = FALSE)

# Visualiser Discount vs Profit avec une courbe de tendance
ggplot(superstore, aes(x = Discount, y = Profit)) +
  geom_point(alpha = 0.5) +
  geom_smooth(method = "lm", color = "blue", se = FALSE) +
  labs(title = "Relation entre Discount et Profit (Superstore)",
       x = "Taux de remise (Discount)",
       y = "Profit ($)") +
  theme_minimal()
```


**Partie 2 - Boxplot : Profit par groupe de Discount**

```{r, echo = FALSE}
# Nettoyer les donn√©es
superstore_clean <- superstore %>%
  filter(!is.na(Discount), !is.na(Profit))

# Cr√©er des groupes de Discount
superstore_clean <- superstore_clean %>%
  mutate(Discount_Group = case_when(
    Discount == 0 ~ "0%",
    Discount > 0 & Discount <= 0.2 ~ "0%-20%",
    Discount > 0.2 & Discount <= 0.4 ~ "20%-40%",
    Discount > 0.4 & Discount <= 0.6 ~ "40%-60%",
    Discount > 0.6 ~ "60%-80%"
  ))

# Visualiser Boxplot
ggplot(superstore_clean, aes(x = Discount_Group, y = Profit, fill = Discount_Group)) +
  geom_boxplot() +
  labs(title = "Distribution du profit selon le taux de remise",
       x = "Cat√©gorie de remise",
       y = "Profit ($)") +
  theme_minimal() +
  theme(legend.position = "none")
```



**Analyse**

**Avec le scatter plot :**

- Nous observons une tendance globale l√©g√®rement n√©gative entre le taux de remise et le profit.
- Plus la remise augmente, plus les profits tendent √† baisser.

**Avec le boxplot :**

- La **structure des donn√©es** devient beaucoup plus claire.
- Jusqu'√† **20% de remise**, les profits restent majoritairement positifs.
- D√®s que la remise d√©passe **40%**, la m√©diane du profit devient n√©gative.
- Nous constatons √©galement que la variabilit√© augmente fortement avec les remises √©lev√©es.

**Diff√©rence entre Scatter plot et Boxplot pour ce probl√®me :**

- Le **scatter plot** nous a permis d'observer une tendance g√©n√©rale.
- Le **boxplot** nous permet de **comparer plus pr√©cis√©ment les profits** selon diff√©rents niveaux de remise, en mettant en √©vidence :
  - Les tendances centrales (**m√©diane**)
  - La dispersion (**√©cart interquartile**)


**Conclusion**

- Sans remise ou avec une remise l√©g√®re (**0%-20%**), les ventes restent globalement rentables.
- D√®s que la remise atteint **20%-40%**, la rentabilit√© diminue visiblement.
- Pour des remises sup√©rieures √† **40%**, les pertes deviennent la norme dans la majorit√© des cas.

Notre analyse montre que :

- Accorder une r√©duction importante n'assure pas un profit ; au contraire, cela augmente consid√©rablement le risque de pertes.
- Le **scatter plot** nous a permis d'identifier une tendance g√©n√©rale.
- Le **boxplot** a confirm√© et pr√©cis√© que les remises √©lev√©es entra√Ænent majoritairement des profits n√©gatifs.
</details>


<details> 
<summary><strong>Question 4 :Quels produits rapportent le plus ?
</strong></summary>

**M√©thode**

Pour r√©pondre √† cette question,Nous nous concentrerons principalement sur deux param√®tres : 
**product_line** : ce param√®tre nous informe sur le type de produit, et **gross_income** : ce param√®tre nous indique le b√©n√©fice g√©n√©r√© par le produit.

Nous utiliserons un diagramme en barres pour analyser les donn√©es, car les cat√©gories de produits poss√®dent plusieurs √©tiquettes diff√©rentes, tandis que le revenu des produits est une valeur unique. Apr√®s avoir tri√© les donn√©es, la comparaison entre les produits sera √©galement plus intuitive.

**Visualisation**

**Bar chart: product_line et gross_income**

```{r message=FALSE, echo = FALSE}
library(dplyr)
library(readr)
library(ggplot2)
library(scales)

data <- read_delim(
  "data/Walmart.csv",
  delim = ";", 
  show_col_types = FALSE
)

result <- data %>%
  group_by(product_line) %>%
  summarise(total_gross_income = sum(gross_income, na.rm = TRUE)) %>%
  arrange(desc(total_gross_income))


ggplot(result, aes(x = reorder(product_line, total_gross_income), y = total_gross_income)) +
  geom_bar(stat = "identity", fill = "steelblue") +
  coord_flip() + 
  labs(title = "Revenu total par cat√©gorie de produits",
       x = '',
       y = "Revenu brut (en dollars)") +
  scale_y_continuous(labels = dollar) +
  geom_text(aes(label = dollar(total_gross_income)), 
            position = position_stack(vjust = 0.5),
            size = 4, color = "white") +  
  theme_minimal()
```


**R√©sultat et Conclusion**

Nous pouvons observer que les produits du supermarch√© Walmart sont r√©partis en six cat√©gories. Parmi celles-ci, la vente de food and beverages g√©n√®re le b√©n√©fice le plus √©lev√©, tandis que health and beauty g√©n√®re le b√©n√©fice le plus faible.
Toutefois, il est important de noter que l'√©cart entre eux n'est pas tr√®s important. Pour certains produits, la diff√©rence de b√©n√©fices ne d√©passe m√™me pas 2%. De plus, tous les b√©n√©fices d√©passent 2000 dollars. √âtant donn√© que les donn√©es collect√©es peuvent √™tre influenc√©es par le contexte social et d'autres facteurs √† l'√©poque, nous pouvons conclure qu'au premier trimestre de 2019, la vente de food and beverages g√©n√©rait les b√©n√©fices les plus √©lev√©s.
</details>


<details> 
<summary><strong>Question 5 : Quelles cat√©gories perdent de l‚Äôargent avec les r√©ductions ?
</strong></summary>

Pour r√©pondre √† cette question, nous allons utiliser le dataset Superstore, qui contient des informations sur les remises, profits et cat√©gories de produits.
Nous chercherons √† analyser l'effet des niveaux de remise sur le profit moyen par cat√©gorie, afin d‚Äôidentifier celles qui deviennent non rentables lorsque des r√©ductions sont appliqu√©es.

**Visualisation**

```{r message=FALSE, warning=FALSE, echo = FALSE}
# Nettoyage des donn√©es : s'assurer qu'il n'y a pas de NA dans les variables cl√©s
superstore_clean <- superstore %>%
  filter(!is.na(Discount), !is.na(Profit), !is.na(Category))

# Calculer le profit moyen par cat√©gorie selon les niveaux de remise
profit_by_discount <- superstore_clean %>%
  mutate(remise = case_when(
    Discount == 0 ~ "0%",
    Discount > 0 & Discount <= 0.2 ~ "0-20%",
    Discount > 0.2 & Discount <= 0.4 ~ "20-40%",
    Discount > 0.4 ~ ">40%"
  )) %>%
  group_by(Category, remise) %>%
  summarise(profit_moyen = mean(Profit), .groups = "drop")

# Visualisation
ggplot(profit_by_discount, aes(x = remise, y = profit_moyen, fill = Category)) +
  geom_col(position = "dodge") +
  labs(
    title = "Profit moyen par niveau de remise et cat√©gorie",
    x = "Niveau de remise",
    y = "Profit moyen",
    fill = "Cat√©gorie"
  ) +
  theme_minimal()
```

**Analyse**

On observe que toutes les cat√©gories deviennent non rentables lorsque la remise d√©passe 40%. En particulier, la cat√©gorie Technology affiche une perte moyenne tr√®s importante, proche de -800.

La cat√©gorie Furniture enregistre √©galement des pertes d√®s le niveau de 20‚Äì40% de remise, avec un profit moyen n√©gatif.

En revanche, des remises plus faibles (entre 0 et 20%) restent g√©n√©ralement rentables pour toutes les cat√©gories, notamment Technology, qui affiche un profit moyen positif dans cette tranche.

Cela sugg√®re que les remises √©lev√©es (> 40%) sont globalement d√©savantageuses, et que leur impact varie fortement selon la cat√©gorie de produit.
</details>


<details> 
<summary><strong>Question 6 :Les choses ch√®res sont-elles mieux not√©es ?
</strong></summary>

**M√©thode**

Pour r√©pondre √† cette question, nous nous concentrerons principalement sur deux param√®tres : 
**unit_price** : ce param√®tre indique le prix unitaire des produits, et **rating** : ce param√®tre refl√®te la satisfaction des clients √† travers leur √©valuation.

Nous utiliserons un diagramme de dispersion pour analyser les donn√©es. Bien que le prix et la note soient des variables num√©riques, ils peuvent √™tre consid√©r√©s comme discr√©tisables afin de mieux visualiser leur relation. En observant la distribution des points, nous pourrons d√©terminer s‚Äôil existe une tendance entre le prix et la note, par exemple si les produits plus chers sont mieux not√©s ou s‚Äôil n‚Äôy a pas de lien clair.

**Visualisation**

**Scatter: Unit_price et rating**
```{r echo=FALSE, message=FALSE, warning=FALSE}

ggplot(data, aes(x = unit_price, y = rating)) +
  geom_point(alpha = 0.6, color = "steelblue") +
  labs(title = "Scatter Plot of Unit Price vs Rating",
       x = "Unit Price",
       y = "Rating") +
  theme_minimal()
```


**R√©sultat et Conclusion**

Si les produits plus chers avaient tendance √† √™tre mieux not√©s, les points seraient approximativement align√©s en bande sur le graphique. Cependant, en observant le nuage de points, on constate que les donn√©es sont r√©parties de mani√®re assez uniforme et d√©sordonn√©e sur l'ensemble du graphique. On peut donc conclure qu‚Äôil n‚Äôexiste pas de relation directe entre le prix unitaire et la note.
De plus, nous avons remarqu√© une observation int√©ressante : quelle que soit la valeur du prix unitaire, la note attribu√©e est toujours sup√©rieure ou √©gale √† 4.
</details>


<details> 
<summary><strong>Question 8 : Est-ce qu‚Äôun long d√©lai de livraison fait perdre de l‚Äôargent ?
</strong></summary>

**M√©thode**

Nous cherchons √† savoir si les d√©lais de livraison ont un impact sur le profit g√©n√©r√© par une vente. Autrement dit, est-ce que livrer plus lentement fait perdre de l'argent √† l'entreprise ?

Nous pensons que plus le d√©lai entre commande et exp√©dition est long, plus cela engendre des co√ªts suppl√©mentaires, ce qui pourrait r√©duire le profit. Nous allons visualiser cette relation √† l‚Äôaide d‚Äôun nuage de points accompagn√© d‚Äôune courbe de tendance lin√©aire.

**Visualisation : D√©lai de livraison vs Profit**

```{r echo=FALSE}
library(lubridate)
library(ggplot2)
library(dplyr)
library(readr)

superstore <- superstore_raw %>%
  mutate(Order_Date = as.Date(`Order Date`, format="%d-%m-%y"),
         Ship_Date = as.Date(`Ship Date`, format="%d-%m-%y"),
         Delivery_Days = as.numeric(difftime(Ship_Date, Order_Date, units = "days")))

# Visualisation
ggplot(superstore, aes(x = factor(Delivery_Days), y = Profit)) +
  geom_boxplot(fill = "lightblue") +
  labs(title = "Profit par d√©lai de livraison (Superstore)",
       x = "D√©lai de livraison (jours)",
       y = "Profit ($)") +
  theme_minimal()

```

**Analyse**

√Ä partir du graphique, on observe :

- Le profit est tr√®s variable, quel que soit le nombre de jours de livraison.

- Aucune tendance claire n‚Äôindique qu‚Äôun d√©lai plus long entra√Æne une baisse syst√©matique du profit.

- La majorit√© des profits, quelle que soit la dur√©e, restent autour de z√©ro.

Interpr√©tation :

- Le d√©lai de livraison ne semble pas avoir d‚Äôeffet direct sur la rentabilit√©.

- D‚Äôautres facteurs (comme les frais de port, la cat√©gorie de produit ou la r√©duction) influencent probablement davantage le profit que la dur√©e de livraison seule.
</details>


<details> 
<summary><strong>Question 9 ‚Äì Quelle cat√©gorie a la plus grosse marge ?
</strong></summary>

Pour r√©pondre √† cette question, nous allons analyser le dataset **Superstore**, en nous concentrant sur la **marge b√©n√©ficiaire totale** (Profit) pour chaque **cat√©gorie de produit**.  
Nous allons visualiser la r√©partition des profits √† l‚Äôaide d‚Äôun graphique circulaire (pie chart), afin d‚Äôidentifier la cat√©gorie la plus rentable.

**Visualisation**

```{r message=FALSE, warning=FALSE, echo = FALSE}

Sys.setlocale("LC_ALL", "fr_FR.UTF-8")

# Nettoyage des donn√©es
superstore_clean <- superstore %>%
  filter(!is.na(Category), !is.na(Profit))

# Calcul du profit total par cat√©gorie
marge_par_categorie <- superstore_clean %>%
  group_by(Category) %>%
  summarise(marge_totale = sum(Profit), .groups = "drop") %>%
  mutate(pourcentage = marge_totale / sum(marge_totale) * 100,
         etiquette = paste0(Category, " (", round(pourcentage, 1), "%)"))

# Visualisation
ggplot(marge_par_categorie, aes(x = "", y = marge_totale, fill = Category)) +
  geom_col(width = 1, color = "white") +
  coord_polar(theta = "y") +
  geom_text(aes(label = etiquette), position = position_stack(vjust = 0.5), size = 4) +
  labs(
    title = "R√©partition des marges par cat√©gorie",
    fill = "Cat√©gorie"
  ) +
  theme_void()

```

**Analyse**
Le graphique montre la r√©partition des marges (profits totaux) entre les trois cat√©gories de produits.

On observe que :

La cat√©gorie Technology g√©n√®re la plus grosse marge, repr√©sentant 50,8 % de la marge totale. Cela indique une forte rentabilit√© globale de cette cat√©gorie, malgr√© les pertes occasionnelles en cas de fortes remises.

La cat√©gorie Office Supplies arrive en deuxi√®me position avec 42,8 % des marges. Elle semble relativement stable en termes de rentabilit√©.

En revanche, la cat√©gorie Furniture ne repr√©sente que 6,4 % des marges totales, ce qui souligne une faible contribution au profit global de l‚Äôentreprise. Cette faible marge peut s‚Äôexpliquer par une sensibilit√© plus forte aux remises ou des co√ªts plus √©lev√©s.

En r√©sum√©, la technologie est le moteur principal de la rentabilit√©, tandis que le mobilier semble le moins performant sur le plan des marges.
</details>


<details> 
<summary><strong>Question 10 :Quel moment de la journ√©e rapporte le plus ?
</strong></summary>

**M√©thode**

Pour r√©pondre √† cette question, nous nous concentrerons principalement sur deux param√®tres :
**time_of_day** : ce param√®tre indique le moment de la journ√©e o√π l‚Äôachat a √©t√© effectu√©, et
**gross_income** : ce param√®tre repr√©sente le revenu brut g√©n√©r√© par la transaction.

Nous allons utiliser le graphique en Dount Chart pour analyser les donn√©es, car il est plus facile de visualiser le pourcentage des revenus au fil du temps pour diff√©rentes p√©riodes. En comparant le revenu total g√©n√©r√© √† chaque moment de la journ√©e, nous serons en mesure d‚Äôidentifier les p√©riodes les plus rentables et ainsi d√©terminer quel moment de la journ√©e rapporte le plus d‚Äôargent.


**Visualisation**

**Bar chart: time_of_day et gross_income**
```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}

income_by_time <- data %>%
  group_by(time_of_day) %>%
  summarise(total_income = sum(gross_income, na.rm = TRUE)) %>%
  arrange(desc(total_income))

income_by_time$time_of_day <- factor(income_by_time$time_of_day,
                                     levels = c("morning", "afternoon", "evening"))
income_by_time <- income_by_time %>%
  mutate(percent = total_income / sum(total_income) * 100,
         label = paste0(round(percent, 1), "%\n$", round(total_income, 1)))

ggplot(income_by_time, aes(x = 2, y = total_income, fill = time_of_day)) +
  geom_bar(stat = "identity", width = 1, color = "white") +
  coord_polar(theta = "y", start = 0) +
  xlim(0.5, 2.5) +
  geom_text(aes(label = label), position = position_stack(vjust = 0.5), color = "white") +
  labs(title = "R√©partition du revenu par tranche horaire de la journ√©e") +
  theme_void() +
  theme(legend.title = element_blank())
```

**R√©sultat et Conclusion**

D‚Äôapr√®s le diagramme en barres, on peut clairement observer que les ventes du matin g√©n√®rent le moins de b√©n√©fices, suivies de l‚Äôapr√®s-midi, tandis que les ventes du soir rapportent le plus. De plus, les b√©n√©fices du matin repr√©sentent moins de la moiti√© de ceux de l‚Äôapr√®s-midi, alors que la diff√©rence entre l‚Äôapr√®s-midi et le soir n‚Äôest pas tr√®s marqu√©e.

Cela m‚Äôa fait penser au cours √âthique et biais de visualisation : comme les tranches horaires du champ time_of_day sont d√©j√† pr√©d√©finies dans le jeu de donn√©es, nous ne connaissons pas la r√©partition exacte des heures. Il est donc possible que, si l‚Äôintervalle de l‚Äôapr√®s-midi avait √©t√© l√©g√®rement √©largi lors de la collecte des donn√©es, cela aurait pu inverser les r√©sultats et faire appara√Ætre l‚Äôapr√®s-midi comme la p√©riode la plus rentable. Ce constat est assez int√©ressant.
</details>


<details> 
<summary><strong>Question 12 : Quels √âtats font le plus de ventes ?
</strong></summary>

**M√©thode**

Nous voulons identifier les r√©gions g√©ographiques les plus actives commercialement, en mesurant la valeur totale des ventes par √âtat dans le jeu de donn√©es Superstore.

Nous supposons que certains √âtats g√©n√®rent beaucoup plus de ventes que d'autres, possiblement en raison de leur population, leur pouvoir d'achat ou leur position g√©ographique strat√©gique. Une repr√©sentation en barplot des ventes totales par √âtat nous permettra de visualiser cette r√©partition.

**Visualisation : Ventes par √âtat**

```{r echo=FALSE}
state_sales <- superstore %>%
  group_by(State) %>%
  summarise(Total_Sales = sum(Sales, na.rm = TRUE)) %>%
  arrange(desc(Total_Sales))

ggplot(state_sales, aes(x = reorder(State, Total_Sales), y = Total_Sales)) +
  geom_col(fill = "steelblue") +
  coord_flip() +
  labs(title = "Total des ventes par √âtat (Superstore)",
       x = "√âtat",
       y = "Ventes ($)") +
  theme_minimal()
```

**Analyse**

Le graphique met en √©vidence des √©carts tr√®s marqu√©s entre les √âtats :

- Californie est de loin l‚Äô√âtat avec le plus grand volume de ventes, suivie par New York et Texas.

- Un petit groupe d‚Äô√âtats concentre l‚Äôessentiel du chiffre d‚Äôaffaires.

- La majorit√© des autres √âtats g√©n√®rent des ventes beaucoup plus faibles, parfois presque n√©gligeables.

Interpr√©tation :

- Les √âtats en t√™te sont g√©n√©ralement plus peupl√©s, plus riches ou plus dens√©ment urbanis√©s, ce qui favorise l‚Äôactivit√© commerciale.

- Cette concentration peut guider les d√©cisions marketing ou logistiques (ciblage, stock, implantation de centres de distribution).
</details>


<details> 
<summary><strong>Question 13 :Quelle r√©gion est la plus performante en termes de rentabilit√© ?
</strong></summary>

**M√©thode**
Pour cette analyse, nous avons utilis√© le jeu de donn√©es Superstore, en nous concentrant sur trois variables cl√©s :

Region : la r√©gion g√©ographique (East, West, South, Central)

Sales : le chiffre d‚Äôaffaires

Profit : le b√©n√©fice

Nous avons proc√©d√© en deux √©tapes :

Agr√©gation des donn√©es par r√©gion, pour obtenir :

Le total des ventes

Le total des profits

La marge b√©n√©ficiaire (Profit / Sales)

Visualisation via un treemap :

La taille de chaque bloc repr√©sente le volume des ventes

La couleur refl√®te la marge b√©n√©ficiaire

Un code couleur du rouge (moins rentable) au vert (plus rentable) facilite l‚Äôinterpr√©tation visuelle

**Visualisation**

```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}
if (!requireNamespace("treemapify", quietly = TRUE)) {
  install.packages("treemapify")
}

library(treemapify)

# Pr√©paration des donn√©es : calcul par r√©gion
region_profitability <- superstore %>%
  filter(!is.na(Sales), !is.na(Profit), !is.na(Region)) %>%
  group_by(Region) %>%
  summarise(
    total_sales = sum(Sales),
    total_profit = sum(Profit),
    profit_margin = total_profit / total_sales,
    .groups = "drop"
  )

# Treemap avec des couleurs plus douces
ggplot(region_profitability, 
       aes(area = total_sales, 
           fill = profit_margin, 
           label = paste0(Region, "\n", round(profit_margin*100, 1), "%"))) +
  geom_treemap() +
  geom_treemap_text(colour = "white", place = "centre", grow = TRUE, reflow = TRUE) +
  scale_fill_gradient2(
    low = "#B22222",    
    mid = "#F0E68C",    
    high = "#228B22",   
    midpoint = mean(region_profitability$profit_margin),
    name = "Marge b√©n√©ficiaire"
  ) +
  labs(title = "Rentabilit√© par r√©gion (taille = ventes, couleur = marge)") +
  theme_minimal()


```

**Analyse**
La r√©gion West se d√©marque nettement avec la plus forte marge b√©n√©ficiaire : 14.9%.

Elle est suivie par East (13.5%) et South (11.9%), qui pr√©sentent √©galement une rentabilit√© raisonnable.

En revanche, la r√©gion Central affiche la rentabilit√© la plus faible, avec une marge de seulement 7.9%.

En termes de volume de ventes (taille des blocs), East et West ont des ventes plus importantes que South et Central, ce qui signifie qu‚Äôelles combinent √† la fois volume et rentabilit√©.

Le treemap permet ici une visualisation doublement efficace : il nous montre o√π se r√©alisent les ventes et dans quelle mesure ces ventes sont profitables.

Cette analyse sugg√®re que pour maximiser la rentabilit√©, l‚Äôentreprise pourrait √©tudier les pratiques commerciales mises en ≈ìuvre dans la r√©gion West, et envisager des actions correctives dans la r√©gion Central.
</details>


<details> 
<summary><strong>Question 15 :Est-ce que la fa√ßon de payer change le prix moyen ?
</strong></summary>

**M√©thode**

Pour r√©pondre √† cette question, nous allons nous concentrer sur deux param√®tres :

**payment_method** : ce param√®tre indique le mode de paiement utilis√© par le client.

**total**: ce param√®tre repr√©sente le montant total pay√© par le client lors de l‚Äôachat.

Nous allons utiliser un diagramme en bo√Æte (boxplot) pour visualiser la distribution des montants en fonction des diff√©rentes m√©thodes de paiement. Le boxplot permet de repr√©senter de mani√®re claire la m√©diane, les quartiles ainsi que les valeurs aberrantes, ce qui nous aide √† d√©terminer si certains moyens de paiement sont associ√©s √† des niveaux de d√©penses diff√©rents, et donc si la m√©thode de paiement a une influence sur le montant pay√© par les clients.


**Visualisation**

**Boxplot: payment_method et total**
```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}


ggplot(data, aes(x = payment_method, y = total, fill = payment_method)) +
  geom_boxplot(alpha = 0.7) +
  labs(title = "R√©partition du montant total des d√©penses selon les diff√©rents modes de paiement",
       x = "payment_method",
       y = "Total") +
  theme_minimal() +
  theme(legend.position = "none")
```


**R√©sultat et Conclusion**
Les trois m√©thodes de paiement (esp√®ces, portefeuille √©lectronique, carte de cr√©dit) ne pr√©sentent pas de diff√©rences significatives en termes de montant moyen pay√©, leurs m√©dianes √©tant relativement proches.
La distribution des montants est √©galement similaire entre les diff√©rentes m√©thodes, avec un nombre et une r√©partition des valeurs aberrantes globalement comparables.
Par cons√©quent, on peut consid√©rer qu‚Äôil n‚Äôy a pas d‚Äôinfluence notable de la m√©thode de paiement sur le montant moyen des achats.
</details>


<details> 
<summary><strong>Question 17 :Quelle boutique gagne le plus d‚Äôargent ?
</strong></summary>

**M√©thode**

Pour identifier la boutique (ville) la plus rentable, nous avons :

Agr√©g√© les profits totaux par ville (City)

Conserver la r√©gion (Region) pour visualiser les diff√©rences g√©ographiques

S√©lectionn√© les 30 villes les plus rentables

Utilis√© un graphe en nuage de bulles (Bubble Cloud) : la taille des bulles repr√©sente le profit total, la couleur la r√©gion

Ce type de visualisation est plus expressif qu‚Äôun simple diagramme en barres : il attire l‚Äôattention sur les villes les plus profitables tout en offrant une vision globale de la r√©partition.

**Visualisation**
```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}
if (!requireNamespace("packcircles", quietly = TRUE)) {
  install.packages("packcircles")
}
if (!requireNamespace("ggrepel", quietly = TRUE)) {
  install.packages("ggrepel")
}

library(packcircles)
library(ggplot2)
library(ggrepel)
library(dplyr)

city_profit <- superstore %>%
  filter(!is.na(City), !is.na(Profit)) %>%
  group_by(City, Region) %>%
  summarise(profit_total = sum(Profit), .groups = "drop") %>%
  arrange(desc(profit_total)) %>%
  slice_max(profit_total, n = 30)

packing <- circleProgressiveLayout(city_profit$profit_total, sizetype = 'area')
city_profit <- cbind(city_profit, packing)

dat.gg <- circleLayoutVertices(packing, npoints = 50)

ggplot() + 
  geom_polygon(data = dat.gg, aes(x, y, group = id, fill = city_profit$Region[id]), colour = "white", alpha = 0.8) +
  geom_text(data = city_profit, aes(x, y, label = City), size = 3, color = "black") +
  scale_fill_brewer(palette = "Set2") +
  theme_void() +
  coord_equal() +
  labs(
    title = "Top 30 des boutiques les plus rentables",
    subtitle = "Taille des bulles = profit total, couleur = r√©gion",
    fill = "R√©gion"
  )

```

**Analyse**

Le graphique met en √©vidence les 30 boutiques (villes) les plus rentables √† travers un nuage de bulles :

La ville la plus rentable est New York City, avec la plus grande bulle, repr√©sentant un profit total nettement sup√©rieur aux autres. Elle appartient √† la r√©gion South (couleur orange clair).

Viennent ensuite Los Angeles, Seattle et San Francisco, toutes trois situ√©es dans la r√©gion West (rose), montrant que cette r√©gion concentre plusieurs boutiques fortement profitables.

La taille des bulles permet de comparer visuellement les profits totaux, tandis que les couleurs indiquent la r√©partition g√©ographique :

West domine en nombre de boutiques rentables dans ce top 30.

South est repr√©sent√©e en t√™te avec New York City.

East et Central sont pr√©sentes, mais avec des bulles globalement plus petites, ce qui sugg√®re des profits moins √©lev√©s.

Ce type de visualisation permet de comparer rapidement les performances financi√®res des boutiques tout en localisant leur r√©gion, offrant ainsi une analyse √† double entr√©e (rentabilit√© + g√©ographie).

Conclusion:
La boutique g√©n√©rant le plus de profit est New York City, situ√©e dans la r√©gion South.

Les r√©gions West et South dominent clairement en termes de rentabilit√© parmi les 30 meilleures boutiques, ce qui pourrait orienter les d√©cisions strat√©giques futures, comme l‚Äôouverture de nouvelles boutiques ou la priorisation des investissements.
</details>

<details> 
<summary><strong>Question 18 :Une r√©duction pousse-t-elle √† acheter plus ?
</strong></summary>

**M√©thode**

Pour r√©pondre √† cette question, nous allons nous concentrer sur deux param√®tres :

**Discount**: Remise appliqu√©e.

**Quantity** : Nombre d‚Äôunit√©s vendues.


Nous utiliserons un graphique de dispersion pour visualiser la relation entre la remise et la quantit√© d'achat correspondante pour chaque transaction. Si le ph√©nom√®ne de "r√©ductions plus importantes, plus d'achats" est vrai, nous pouvons observer une tendance de corr√©lation positive dans le graphique (les points de donn√©es sont distribu√©s en bas de gauche en haut √† droite). Inversement, s'il n'y a pas de mod√®le √©vident, cela peut indiquer que la remise a peu d'impact sur la quantit√© d'achat.

**Visualisation**

**Line chart: Discount et Quantity**
```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}
data_superStore <- read_delim(
  "data/superstore.csv",
)

ggplot(data_superStore, aes(x = Discount, y = Quantity)) +
  geom_point(alpha = 0.5, color = "steelblue") +
  labs(title = "Relation entre la r√©duction et la quantit√© achet√©e",
       x = "R√©duction (Discount)",
       y = "Quantit√© achet√©e") +
  theme_minimal()
```

**R√©sultat et Conclusion**
Les parcelles de dispersion montrent que la plupart des transactions sont effectu√©es √† faible remise et que le nombre d'achats est g√©n√©ralement stable. Le nombre de ventes dans diff√©rentes remises est essentiellement la distribution d'√©valuation.En d'autres termes, dans cet ensemble de donn√©es, les remises ne semblent pas encourager clairement les clients √† acheter plus.
</details>


<details> 
<summary><strong>Question 19 : Est-ce que les gens notent mieux s‚Äôils paient plus ?
</strong></summary>

Nous voulons savoir s‚Äôil existe une relation entre le montant d√©pens√© par un client et la note qu‚Äôil attribue √† son exp√©rience d‚Äôachat.

Nous √©mettons l‚Äôhypoth√®se que payer plus pourrait √™tre associ√© √† une meilleure satisfaction, car le client peut percevoir une meilleure qualit√© de service ou de produit. Nous analyserons cela via un nuage de points avec courbe de tendance lin√©aire.

**Visualisation : Total pay√© vs Note client**

```{r echo=FALSE}

library(dplyr)

walmart_total %>%
  mutate(total_bin = cut(total, 
                         breaks = c(0, 100, 200, 300, 400, 500, 600, 1000),
                         labels = c("0-100", "100-200", "200-300", "300-400", "400-500", "500-600", "600+"))) %>%
  filter(!is.na(total_bin)) %>%     # <-- Cette ligne filtre les NA
  group_by(total_bin) %>%
  summarise(mean_rating = mean(rating, na.rm = TRUE)) %>%
  ggplot(aes(x = total_bin, y = mean_rating)) +
  geom_col(fill = "steelblue") +
  geom_text(aes(label = round(mean_rating, 2)), vjust = -0.5) +
  labs(title = "Note moyenne par tranche de total pay√©",
       x = "Tranche de montant total ($)",
       y = "Note moyenne") +
  theme_minimal()
```

**Analyse**

Le graphique pr√©sente la note moyenne donn√©e par les clients en fonction du montant total pay√© :

- Les meilleures notes sont observ√©es dans les tranches 100‚Äì200‚ÄØ$ (7.22) et 500‚Äì600‚ÄØ$ (7.28).

- Les tranches 200‚Äì500‚ÄØ$ restent globalement stables, avec des notes autour de 7.0.

- En dessous de 100‚ÄØ$ et au-dessus de 600‚ÄØ$, les notes sont plus basses : respectivement 6.8 et 6.71, et 6.2 pour les valeurs manquantes.

Interpr√©tation :

- Il n‚Äôexiste pas de relation lin√©aire forte entre montant pay√© et satisfaction.

- Toutefois, une d√©pense mod√©r√©e √† √©lev√©e (100‚Äì600‚ÄØ$) semble associ√©e √† des notes l√©g√®rement meilleures.

- Cela peut s‚Äôexpliquer par une meilleure exp√©rience per√ßue lorsque le client paie pour des produits ou services de meilleure qualit√©.
</details>


<details> 
<summary><strong> Question 20 : √Ä quelle heure ach√®te-t-on le plus ?
</strong></summary>

Nous cherchons √† savoir √† quel moment de la journ√©e les clients r√©alisent le plus d‚Äôachats dans le magasin Walmart. Cette information peut aider √† mieux comprendre les habitudes d‚Äôachat et √† adapter les ressources (personnel, stock, promotions) en fonction des heures de forte activit√©.

Nous supposons que les clients font davantage d‚Äôachats autour de midi (pause d√©jeuner) et en fin de journ√©e (apr√®s le travail). Pour tester cela, nous allons extraire l‚Äôheure √† partir de la variable tme, regrouper les montants totaux par heure, et les repr√©senter sous forme de barplot.

**Walmart - R√©partition des ventes par heure**

```{r, echo = FALSE}
walmart_time <- walmart_time %>%
  mutate(Hour = hour(hms(tme))) %>%
  group_by(Hour) %>%
  summarise(Total_Sales = sum(total, na.rm = TRUE))

ggplot(walmart_time, aes(x = Hour, y = Total_Sales)) +
  geom_col(fill = "darkblue") +
  geom_text(aes(label = round(Total_Sales, 0)), vjust = -0.5) +
  labs(title = "Walmart : Ventes totales par heure", x = "Heure de la journ√©e", y = "Ventes ($)") +
  scale_x_continuous(breaks = 0:23) +
  theme_minimal()
```
**Analyse**

√Ä partir du graphique, on peut tirer les observations suivantes :

Les pics de ventes se situent :

- autour de 13h (34 723 $) ‚Üí pause d√©jeuner.

- vers 19h (39 700 $) ‚Üí sortie du travail.

Les ventes sont plus faibles :

- Entre 16h et 17h, p√©riode interm√©diaire entre travail et retour √† la maison.

- √Ä partir de 20h, les achats diminuent fortement.

Interpr√©tation :

- √Ä midi, les clients profitent de leur pause pour faire quelques courses rapides.

- En soir√©e, ils s‚Äôarr√™tent au magasin en rentrant du travail.

- T√¥t le matin et tard le soir, l‚Äôactivit√© baisse car les clients ne sont pas disponibles (sommeil, travail, repas).
</details>





